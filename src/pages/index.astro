---
import Layout from "../layouts/Layout.astro";
import UltContainer from "../components/ult/UltContainer.astro";
import UltCreate from "../components/ult/UltCreate.astro";
import ErrorDisplay from "../components/ErrorDisplay.astro";
import { apiCall, tryConnection } from "../helpers/index";

const connected = await tryConnection();
const { error, code, data } =
  connected !== true ? connected : await apiCall("/ult");
---

<Layout title="Ult - index" mainHeader="Home">
  {
    !error ? (
      <>
        <UltCreate />
        <UltContainer data={data} />
      </>
    ) : (
      <ErrorDisplay message={data} code={code} />
    )
  }
</Layout>
